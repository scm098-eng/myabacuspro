{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase-admin.ts"],"sourcesContent":["\nimport * as admin from 'firebase-admin';\n\n// This function initializes the Firebase Admin SDK.\n// It checks if the SDK has already been initialized to prevent errors.\nexport function getFirebaseAdmin() {\n  if (admin.apps.length > 0) {\n    return admin.app();\n  }\n\n  // If not initialized, it initializes the app.\n  // In a deployed Firebase environment (like Cloud Functions or App Hosting),\n  // this will automatically use the project's service account credentials.\n  return admin.initializeApp();\n}\n"],"names":[],"mappings":";;;AACA;;AAIO,SAAS;IACd,IAAI,2HAAA,CAAA,OAAU,CAAC,MAAM,GAAG,GAAG;QACzB,OAAO,CAAA,GAAA,2HAAA,CAAA,MAAS,AAAD;IACjB;IAEA,8CAA8C;IAC9C,4EAA4E;IAC5E,yEAAyE;IACzE,OAAO,CAAA,GAAA,2HAAA,CAAA,gBAAmB,AAAD;AAC3B","debugId":null}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["'use server';\n\nimport { getFirestore, serverTimestamp } from 'firebase-admin/firestore';\nimport { getFirebaseAdmin } from '@/lib/firebase-admin';\nimport type { ProfileData } from '@/types';\nimport { revalidatePath } from 'next/cache';\n\ninterface UpdateProfileRequest {\n  uid: string;\n  data: Partial<Omit<ProfileData, 'uid' | 'email' | 'createdAt' | 'role' | 'status' | 'subscriptionStatus'>>;\n}\n\nexport async function updateUserProfile(request: UpdateProfileRequest) {\n  try {\n    getFirebaseAdmin();\n  } catch (e) {\n    console.error('Firebase Admin SDK not initialized');\n    // Depending on the desired behavior, you might want to return an error response\n    return { success: false, message: 'Server configuration error.' };\n  }\n\n  const { uid, data } = request;\n  const db = getFirestore();\n  const userDocRef = db.collection('users').doc(uid);\n\n  // Sanitize the data to prevent users from updating protected fields\n  const sanitizedData: Partial<ProfileData> & { updatedAt: any } = {\n    ...data,\n    updatedAt: serverTimestamp(),\n  };\n  \n  // Explicitly remove any fields a user should not be able to change\n  delete (sanitizedData as any).role;\n  delete (sanitizedData as any).status;\n  delete (sanitizedData as any).subscriptionStatus;\n  delete (sanitizedData as any).isAdmin; \n  delete (sanitizedData as any).createdAt;\n  delete (sanitizedData as any).uid;\n\n  try {\n    await userDocRef.update(sanitizedData);\n    revalidatePath('/profile'); // Revalidate the profile page to show new data\n    return { success: true, message: 'Profile updated successfully.' };\n  } catch (error: any) {\n    console.error('Error updating profile:', error);\n    return { success: false, message: 'Could not update profile.' };\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;;;;;;;;;;;AAOO,eAAe,kBAAkB,OAA6B;IACnE,IAAI;QACF,CAAA,GAAA,+HAAA,CAAA,mBAAgB,AAAD;IACjB,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC;QACd,gFAAgF;QAChF,OAAO;YAAE,SAAS;YAAO,SAAS;QAA8B;IAClE;IAEA,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;IACtB,MAAM,KAAK,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IACtB,MAAM,aAAa,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC;IAE9C,oEAAoE;IACpE,MAAM,gBAA2D;QAC/D,GAAG,IAAI;QACP,WAAW,CAAA,GAAA,4JAAA,CAAA,kBAAe,AAAD;IAC3B;IAEA,mEAAmE;IACnE,OAAO,AAAC,cAAsB,IAAI;IAClC,OAAO,AAAC,cAAsB,MAAM;IACpC,OAAO,AAAC,cAAsB,kBAAkB;IAChD,OAAO,AAAC,cAAsB,OAAO;IACrC,OAAO,AAAC,cAAsB,SAAS;IACvC,OAAO,AAAC,cAAsB,GAAG;IAEjC,IAAI;QACF,MAAM,WAAW,MAAM,CAAC;QACxB,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE,aAAa,+CAA+C;QAC3E,OAAO;YAAE,SAAS;YAAM,SAAS;QAAgC;IACnE,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO;YAAE,SAAS;YAAO,SAAS;QAA4B;IAChE;AACF;;;IAnCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {updateUserProfile as '40e89e80f0b0a03627fd49a1a3594c09852002460d'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgQ,GAC7R,8BACA","debugId":null}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}