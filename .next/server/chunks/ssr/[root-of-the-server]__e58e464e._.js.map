{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { getFirestore, serverTimestamp } from 'firebase-admin/firestore';\nimport * as admin from 'firebase-admin';\nimport type { ProfileData } from '@/types';\nimport { revalidatePath } from 'next/cache';\n\nexport async function updateUserProfile(prevState: any, formData: FormData) {\n  try {\n    if (admin.apps.length === 0) {\n        const serviceAccount = JSON.parse(\n            process.env.FIREBASE_SERVICE_ACCOUNT_KEY as string\n        );\n        admin.initializeApp({\n            credential: admin.credential.cert(serviceAccount),\n        });\n    }\n  } catch (e: any) {\n    console.error('Firebase Admin SDK initialization error:', e.message);\n    return { success: false, message: 'Server configuration error.' };\n  }\n\n  const db = getFirestore();\n  const uid = formData.get('uid') as string;\n\n  if (!uid) {\n    return { success: false, message: 'User not authenticated.' };\n  }\n\n  const userDocRef = db.collection('users').doc(uid);\n\n  const data: Partial<ProfileData> = {\n    firstName: formData.get('firstName') as string,\n    middleName: formData.get('middleName') as string,\n    surname: formData.get('surname') as string,\n    dob: new Date(formData.get('dob') as string).toISOString(),\n    country: formData.get('country') as string,\n    addressLine1: formData.get('addressLine1') as string,\n    city: formData.get('city') as string,\n    taluka: formData.get('taluka') as string,\n    district: formData.get('district') as string,\n    state: formData.get('state') as string,\n    pincode: formData.get('pincode') as string,\n    schoolName: formData.get('schoolName') as string,\n    grade: formData.get('grade') as string,\n    mobileNo: formData.get('mobileNo') as string,\n    whatsappNo: formData.get('whatsappNo') as string,\n    teacherId: formData.get('teacherId') as string,\n    instituteName: formData.get('instituteName') as string,\n    instituteCountry: formData.get('instituteCountry') as string,\n    instituteAddressLine1: formData.get('instituteAddressLine1') as string,\n    instituteCity: formData.get('instituteCity') as string,\n    instituteTaluka: formData.get('instituteTaluka') as string,\n    instituteDistrict: formData.get('instituteDistrict') as string,\n    instituteState: formData.get('instituteState') as string,\n    institutePincode: formData.get('institutePincode') as string,\n  };\n\n  const sanitizedData = { ...data };\n\n  // This is a server action, so we can trust the data sanitization\n  // to happen here and not rely on security rules for this part.\n  const updatePayload: { [key: string]: any } = {\n    ...sanitizedData,\n    updatedAt: serverTimestamp(),\n  };\n\n  // Ensure protected fields are not in the payload from the form\n  delete updatePayload.role;\n  delete updatePayload.status;\n  delete updatePayload.subscriptionStatus;\n  delete (updatePayload as any).isAdmin;\n  delete (updatePayload as any).createdAt;\n\n\n  try {\n    await userDocRef.update(updatePayload);\n    revalidatePath('/profile');\n    revalidatePath('/'); // Revalidate home in case header data changed\n    return { success: true, message: 'Profile updated successfully.' };\n  } catch (error: any) {\n    console.error('Error updating profile:', error);\n    return { success: false, message: 'Could not update profile.' };\n  }\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAEA;;;;;;;;;;;AAEO,eAAe,kBAAkB,SAAc,EAAE,QAAkB;IACxE,IAAI;QACF,IAAI,2HAAA,CAAA,OAAU,CAAC,MAAM,KAAK,GAAG;YACzB,MAAM,iBAAiB,KAAK,KAAK,CAC7B,QAAQ,GAAG,CAAC,4BAA4B;YAE5C,CAAA,GAAA,2HAAA,CAAA,gBAAmB,AAAD,EAAE;gBAChB,YAAY,2HAAA,CAAA,aAAgB,CAAC,IAAI,CAAC;YACtC;QACJ;IACF,EAAE,OAAO,GAAQ;QACf,QAAQ,KAAK,CAAC,4CAA4C,EAAE,OAAO;QACnE,OAAO;YAAE,SAAS;YAAO,SAAS;QAA8B;IAClE;IAEA,MAAM,KAAK,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IACtB,MAAM,MAAM,SAAS,GAAG,CAAC;IAEzB,IAAI,CAAC,KAAK;QACR,OAAO;YAAE,SAAS;YAAO,SAAS;QAA0B;IAC9D;IAEA,MAAM,aAAa,GAAG,UAAU,CAAC,SAAS,GAAG,CAAC;IAE9C,MAAM,OAA6B;QACjC,WAAW,SAAS,GAAG,CAAC;QACxB,YAAY,SAAS,GAAG,CAAC;QACzB,SAAS,SAAS,GAAG,CAAC;QACtB,KAAK,IAAI,KAAK,SAAS,GAAG,CAAC,QAAkB,WAAW;QACxD,SAAS,SAAS,GAAG,CAAC;QACtB,cAAc,SAAS,GAAG,CAAC;QAC3B,MAAM,SAAS,GAAG,CAAC;QACnB,QAAQ,SAAS,GAAG,CAAC;QACrB,UAAU,SAAS,GAAG,CAAC;QACvB,OAAO,SAAS,GAAG,CAAC;QACpB,SAAS,SAAS,GAAG,CAAC;QACtB,YAAY,SAAS,GAAG,CAAC;QACzB,OAAO,SAAS,GAAG,CAAC;QACpB,UAAU,SAAS,GAAG,CAAC;QACvB,YAAY,SAAS,GAAG,CAAC;QACzB,WAAW,SAAS,GAAG,CAAC;QACxB,eAAe,SAAS,GAAG,CAAC;QAC5B,kBAAkB,SAAS,GAAG,CAAC;QAC/B,uBAAuB,SAAS,GAAG,CAAC;QACpC,eAAe,SAAS,GAAG,CAAC;QAC5B,iBAAiB,SAAS,GAAG,CAAC;QAC9B,mBAAmB,SAAS,GAAG,CAAC;QAChC,gBAAgB,SAAS,GAAG,CAAC;QAC7B,kBAAkB,SAAS,GAAG,CAAC;IACjC;IAEA,MAAM,gBAAgB;QAAE,GAAG,IAAI;IAAC;IAEhC,iEAAiE;IACjE,+DAA+D;IAC/D,MAAM,gBAAwC;QAC5C,GAAG,aAAa;QAChB,WAAW,CAAA,GAAA,4JAAA,CAAA,kBAAe,AAAD;IAC3B;IAEA,+DAA+D;IAC/D,OAAO,cAAc,IAAI;IACzB,OAAO,cAAc,MAAM;IAC3B,OAAO,cAAc,kBAAkB;IACvC,OAAO,AAAC,cAAsB,OAAO;IACrC,OAAO,AAAC,cAAsB,SAAS;IAGvC,IAAI;QACF,MAAM,WAAW,MAAM,CAAC;QACxB,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;QACf,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE,MAAM,8CAA8C;QACnE,OAAO;YAAE,SAAS;YAAM,SAAS;QAAgC;IACnE,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO;YAAE,SAAS;YAAO,SAAS;QAA4B;IAChE;AACF;;;IA7EsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/profile/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {updateUserProfile as '60e89e80f0b0a03627fd49a1a3594c09852002460d'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/profile/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/profile/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/profile/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4R,GACzT,0DACA","debugId":null}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/profile/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/profile/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/profile/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwQ,GACrS,sCACA","debugId":null}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}